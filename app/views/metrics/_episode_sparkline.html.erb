<%= turbo_frame_tag "episode_sparkline" do %>
  <% trend = parse_trend(episode_trend) %>
  <div class="d-flex align-items-center <%= trend[:color] %>">
    <span><%= trend[:percent] if trend.present? %></span>
    <span class="material-icons ms-1" aria-hidden="true"><%= trend[:direction] if trend.present? %></span>
  </div>
  <div class="position-absolute top-50 start-50 translate-middle w-100 h-100 z-0"
    data-controller="apex-downloads"
    data-apex-downloads-id-value="<%= episode.guid %>"
    data-apex-downloads-downloads-value="<%= downloads.to_json %>">
    <div data-apex-downloads-target="chart"></div>
  </div>
<% end %>
