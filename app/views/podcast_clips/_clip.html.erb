<div class="card episode-card border-<%= stream_status_class(clip) %>">
  <div class="card-body episode-card-info d-align-items-center justify-content-between">
    <div class="col d-flex align-items-center">
      <p class="episode-card-date">
        <%= stream_date(clip) %>
      </p>

      <div class="episode-card-inner">
        <h2 class="episode-card-title"><%= t(".title") %></h2>
        <div class="d-flex mt-2 align-items-center">
          <p class="card-text text-small me-1"><%= stream_hour(clip) %></p>

          <span class="badge rounded-pill bg-<%= stream_status_class(clip) %>">
            <% if clip.status_complete? && clip.short? %>
              <%= t(".partial_hour") %>
            <% elsif clip.status_complete? %>
              <%= t(".full_hour") %>
            <% elsif clip.recording? %>
              <%= t(".recording") %>
            <% else %>
              <%= clip.status.capitalize %>
            <% end %>
          </span>
        </div>
      </div>
    </div>

    <% if clip.recording? %>
      <div class="col d-flex align-items-center flex-fill justify-content-end gap-2">
        <span class="material-icons text-danger" aria-label="hidden">circle</span>
      </div>
    <% end %>

    <% if clip.status_complete? %>
      <div class="col prx-audio-player prx-swanky d-flex align-items-center flex-fill mx-4"
           data-controller="audio-player"
           data-audio-player-offset-value="<%= clip.offset_start %>"
           data-audio-player-duration-value="<%= clip.offset_duration %>">
        <button type="button" class="btn prx-play m-0 px-0" data-action="audio-player#play">
          <span class="material-icons text-primary">play_arrow</span>
        </button>

        <button type="button" class="btn prx-pause m-0 px-0" data-action="audio-player#pause">
          <span class="material-icons text-primary">pause</span>
        </button>

        <small class="prx-error text-danger me-2"><%= t(".unable") %></small>

        <div class="flex-fill d-none d-md-block me-2 py-2 prx-scrub" data-action="mousedown->audio-player#mouseDown" data-audio-player-target="scrubber">
          <div class="progress" data-audio-player-target="progress">
            <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" data-audio-player-target="progressBar"></div>
          </div>
        </div>

        <audio class="" src="<%= clip.url %>" preload="metadata" data-audio-player-target="audio" data-action="timeupdate->audio-player#audioTimeUpdate ended->audio-player#audioEnded"></audio>

        <small class="text-muted" data-audio-player-target="duration">(<%= clip.offset_duration.to_time_summary %>)</small>
      </div>

      <div class="col d-flex align-items-center justify-content-end gap-2">
        <button class="btn btn-sm btn-primary"><span class="material-icons" aria-label="hidden">movie_edit</span> <span class="d-none d-md-block">Edit</span></button>
        <button class="btn btn-sm btn-warning"><span class="material-icons" aria-label="hidden">attach_file</span> <span class="d-none d-md-block">Attach to Draft</span></button>
        <button class="btn btn-sm btn-success"><span class="material-icons" aria-label="hidden">add</span> <span class="d-none d-md-block">Create Episode</span></button>
      </div>
    <% end %>
  </div>
</div>
