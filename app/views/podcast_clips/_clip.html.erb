<div class="card episode-card border-warning">
  <div class="card-body">
    <div class="episode-card-info">
      <p class="episode-card-date">
        <%= stream_date(clip) %>
      </p>

      <div class="episode-card-inner">
        <h2 class="episode-card-title"><%= t(".title") %></h2>
        <div class="d-flex mt-2 align-items-center">
          <p class="card-text text-small me-1"><%= stream_hour(clip) %></p>

          <% if clip.status_complete? && clip.short? %>
            <span class="badge rounded-pill bg-danger"><%= t(".partial_hour") %></span>
          <% elsif clip.status_complete? %>
            <span class="badge rounded-pill bg-info"><%= t(".full_hour") %></span>
          <% elsif clip.recording? %>
            <span class="badge rounded-pill bg-danger"><%= t(".recording") %></span>
          <% else %>
            <span class="badge rounded-pill bg-danger"><%= clip.status.capitalize %></span>
          <% end %>
        </div>
      </div>

      <% if clip.recording? %>
        <div class="d-flex align-items-center gap-2">
          <span class="material-icons text-danger" style="font-size:40px" aria-label="hidden">circle</span>
        </div>
      <% end %>

      <% if clip.status_complete? %>
          <div class="prx-audio-player prx-swanky d-flex align-items-center flex-grow-1 me-2" data-controller="audio-player">
            <button type="button" class="btn prx-play" data-action="audio-player#play">
              <span class="material-icons text-primary">play_arrow</span>
            </button>

            <button type="button" class="btn prx-pause" data-action="audio-player#pause">
              <span class="material-icons text-primary">pause</span>
            </button>

            <small class="prx-error text-danger flex-grow-1 me-2"><%= t(".unable") %></small>

            <div class="flex-grow-1 me-2 py-2 prx-scrub" data-action="mousedown->audio-player#mouseDown" data-audio-player-target="scrubber">
              <div class="progress" data-audio-player-target="progress">
                <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" data-audio-player-target="progressBar"></div>
              </div>
            </div>

            <audio class="" src="<%= clip.url %>" preload="none" data-audio-player-target="audio" data-action="timeupdate->audio-player#audioTimeUpdate ended->audio-player#audioEnded"></audio>

            <small class="text-muted" data-audio-player-target="duration">(<%= episode_media_duration(clip) %>)</small>
          </div>

        <div class="d-flex align-items-center gap-2">
          <button class="btn btn-sm btn-primary"><span class="material-icons" aria-label="hidden">movie_edit</span> Edit</button>
          <button class="btn btn-sm btn-warning"><span class="material-icons" aria-label="hidden">attach_file</span> Attach to Draft</button>
          <button class="btn btn-sm btn-success"><span class="material-icons" aria-label="hidden">add</span> Create Episode</button>
        </div>
      <% end %>
    </div>
  </div>
</div>
