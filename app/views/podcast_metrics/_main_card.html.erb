<%= turbo_frame_tag "main_card" do %>
  <div class="card shadow border-0">
    <div class="card-header card-header-light d-flex justify-content-between">
      <ul class="col-8 nav nav-pills nav-justified card-header-pills">
        <li class="nav-item"><button class="nav-link active" id="downloads-tab" data-bs-toggle="tab" data-bs-target="#downloads" type="button" role="tab" aria-controls="downloads" aria-selected="true" data-action="apex-nav#changeTab" data-apex-nav-card-param="main" data-apex-nav-tab-param="downloads"><%= t(".tabs.downloads") %></button></li>
        <li class="nav-item"><button class="nav-link" id="episodes-tab" data-bs-toggle="tab" data-bs-target="#episodes" type="button" role="tab" aria-controls="episodes" aria-selected="false" data-action="apex-nav#changeTab" data-apex-nav-card-param="main" data-apex-nav-tab-param="episodes"><%= t(".tabs.episodes") %></button></li>
        <li class="nav-item"><button class="nav-link" id="uniques-tab" data-bs-toggle="tab" data-bs-target="#uniques" type="button" role="tab" aria-controls="uniques" aria-selected="false" data-action="apex-nav#changeTab" data-apex-nav-card-param="main" data-apex-nav-tab-param="uniques"><%= t(".tabs.uniques") %></button></li>
        <li class="nav-item"><button class="nav-link" id="dropdays-tab" data-bs-toggle="tab" data-bs-target="#dropdays" type="button" role="tab" aria-controls="dropdays" aria-selected="false" data-action="apex-nav#changeTab" data-apex-nav-card-param="main" data-apex-nav-tab-param="dropdays"><%= t(".tabs.dropdays") %></button></li>
      </ul>
      <div class="col-2" data-apex-nav-target="tab" data-card="main" data-tab="downloads">
        <%= render "metrics/filter_interval", url: podcast_metrics_path(podcast), interval: interval, path: "downloads" %>
      </div>
      <div class="col-2 d-none" data-apex-nav-target="tab" data-card="main" data-tab="episodes">
        <%= render "metrics/filter_interval", url: podcast_metrics_path(podcast), interval: interval, path: "episodes" %>
      </div>
      <div class="col-2 d-none" data-apex-nav-target="tab" data-card="main" data-tab="uniques">
        <%= render "metrics/filter_uniques_range", url: podcast_metrics_path(podcast), uniques_selection: uniques_selection, path: "uniques" %>
      </div>
      <div class="col-2 d-none" data-apex-nav-target="tab" data-card="main" data-tab="dropdays">
        <%= render "metrics/filter_dropday_range", url: podcast_metrics_path(podcast), dropday_range: dropday_range, path: "dropdays" %>
      </div>
    </div>
    <div class="card-body metrics-card-body">
      <%= turbo_frame_tag "downloads", src: downloads_podcast_metrics_path(podcast: podcast, date_start: date_start, date_end: date_end, interval: interval), data: {apex_nav_target: "tab", card: "main", tab: "downloads"} do %>
        <%= render "metrics/loading_card" %>
      <% end %>
      <%= turbo_frame_tag "episodes", src: episodes_podcast_metrics_path(podcast: podcast, date_start: date_start, date_end: date_end, interval: interval), data: {apex_nav_target: "tab", card: "main", tab: "episodes"}, class: "d-none" do %>
        <%= render "metrics/loading_card" %>
      <% end %>
      <%= turbo_frame_tag "uniques", src: uniques_podcast_metrics_path(podcast: podcast, date_start: date_start, date_end: date_end, uniques_selection: uniques_selection, interval: interval), data: {apex_nav_target: "tab", card: "main", tab: "uniques"}, class: "d-none" do %>
        <%= render "metrics/loading_card" %>
      <% end %>
      <%= turbo_frame_tag "dropdays", src: dropdays_podcast_metrics_path(podcast: podcast, interval: interval, dropday_range: dropday_range), loading: "lazy", data: {apex_nav_target: "tab", card: "main", tab: "dropdays"}, class: "d-none" do %>
        <%= render "metrics/loading_card" %>
      <% end %>
    </div>
  </div>
<% end %>
