<%= form_with(url: url, method: :get, id: "podcast_metrics", data: {controller: "apex-nav click", apex_nav_main_card_value: main_card, apex_nav_agents_card_value: agents_card, click_debounce_value: 200}) do |form| %>
  <div class="container col-12 d-flex align-items-center justify-content-between my-4">
    <h1 class="fw-bold my-0 mb-0 me-4"><%= t(".header") %></h1>
    <div class="d-flex justify-items-end">
      <%= render "metrics/filter_dates", form: form, podcast: podcast, date_start: date_start, date_end: date_end, interval: interval, date_range_options: date_range_options %>
    </div>
  </div>
  <div class="container col-12 my-4">
    <%= render "main_card", podcast: podcast, date_start: date_start, date_end: date_end, interval: interval, uniques_selection: uniques_selection, dropday_range: dropday_range %>
  </div>
  <div class="container col-12 mb-2">
    <div class="col mb-4">
      <div class="row gx-2">
        <div class="col-6 mb-2">
          <%# render "geo_card", geo_type: "Countries" %>
        </div>
        <div class="col-6 mb-2">
          <%# render "geo_card", geo_type: "Metros" %>
        </div>
      </div>
    </div>
  </div>
  <div class="container col-12 my-4">
    <%# render "agents_card", podcast: @podcast, date_start: @date_start, date_end: @date_end, interval: @interval %>
  </div>

  <%= form.date_field :date_start, class: "d-none", data: {apex_nav_target: "startDate", action: "change->click#submit"}, value: date_start %>
  <%= form.date_field :date_end, class: "d-none", data: {apex_nav_target: "endDate", action: "change->click#submit"}, value: date_end %>
  <%= form.select :interval, interval_options, {selected: interval}, class: "d-none", data: {apex_nav_target: "interval", action: "change->click#submit"} %>
  <%= form.submit class: "d-none", data: {click_target: "submit"} %>
<% end %>
