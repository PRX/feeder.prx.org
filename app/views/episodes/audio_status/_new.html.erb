<div class="col-12 mb-4 d-flex align-items-center" data-controller="upload">
  <%= form.hidden_field :original_url, data: {upload_target: "originalUrl"} %>
  <%= form.hidden_field :file_size, data: {upload_target: "fileSize"} %>
  <%= form.hidden_field :position %>

  <div class="form-floating flex-grow-1" data-upload-target="picker">
    <%# NOTE: name is nil, so we don't submit the actual file to Rails %>
    <% data = {action: "change->unsaved#change upload#upload", upload_target: "audioFile"} %>
    <% data[:unsaved_target] = "changed" if defined?(replacing) && replacing %>
    <%= form.file_field :audio_file, class: "form-control", accept: "audio/*", name: nil, data: data %>
    <%= form.label :audio_file, class: "visually-hidden" %>
  </div>

  <div class="progress flex-grow-1 me-2 d-none" data-upload-target="progress">
    <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" data-upload-target="progressBar">
      <span data-upload-target="progressBytes"></span>
    </div>
  </div>

  <h5 class="m-0 d-none" data-upload-target="progress">
    <strong data-upload-target="fileName"></strong>
    <small class="text-muted">(<span data-upload-target="fileSize"></span>)</small>
  </h5>

  <div class="alert alert-danger m-0 flex-grow-1 d-none" role="alert" data-upload-target="error"></div>

  <button class="btn d-none" data-action="upload#cancelUpload" data-upload-target="cancel">
    <span class="material-icons">delete</span>
  </button>
</div>
