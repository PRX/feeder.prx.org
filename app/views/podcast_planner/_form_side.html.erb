<div class="card">
  <div class="card-header-primary">
    <h5 class="card-title"><%= t(".header.preview") %></h5>
  </div>

  <%= form_with(
        url: podcast_planner_path(@podcast),
        method: :post
      ) do |form| %>
      <div class="card-body">
        <div class="row mb-4">
          <div class="col-lg-6">
            <h3 class="fw-bold"><%= t(".header.publish_time") %></h3>
            <div class="form-floating">
              <%= form.select :publish_time, time_options %>
              <%= form.label :publish_time %>
            </div>
          </div>

          <div class="col-lg-6">
            <h3 class="fw-bold"><%= t(".header.audio_segments") %></h3>
            <div class="form-floating">
              <%= form.number_field :segment_count, {min: 1, max: 10, step: 1, value: 2} %>
              <%= form.label :segment_count %>
            </div>
          </div>
        </div>

        <div class="col-lg">
          <% if @planner.dates.present? %>
          <p><%= t(".header.number_of_drafts", count: @planner.dates.count) %></p>
          <% end %>

          <%= turbo_frame_tag "preview", target: "_top" do %>
            <div class="row">
              <% 6.times do |i| %>
                <%= render "calendar", form: form, month: Date.today.beginning_of_month + i.months, planner: @planner %>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
      <div class="card-footer">
        <%= form.submit t(".label.submit"), class: "btn btn-primary" %>
      </div>
  <% end %>
</div>
