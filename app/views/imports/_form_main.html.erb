<div class="overflow-auto text-nowrap">
  <%= turbo_frame_tag "imports-table" do %>
    <table class="table table-striped shadow rounded">
      <thead>
        <tr class="table-secondary">
          <th>ID</th>
          <th>Status</th>
          <th>Episode Count</th>
          <th>Feed Url</th>
          <th>Import Date</th>
        </tr>
      </thead>
      <tbody>
        <% if imports.first.persisted? %>
          <% imports.each do |import| %>
            <% if import.persisted? %>
                <tr>
                  <td><%= import.id %></td>
                  <td><%= link_to import.status, podcast_import_path(podcast, import), data: {turbo: false} %></td>
                  <% if import.status_complete? || import.status_failed? %>
                    <td><%= import.feed_episode_count %></td>
                  <% else %>
                    <td><%= import.episode_imports.complete.count %></td>
                    <%# just keep polling until the import finishes %>
                    <%= link_to "", request.fullpath, class: "d-none", data: {controller: "polling"} %>
                  <% end %>
                  <td><%= import.url %></td>
                  <td><%= import.created_at.to_date %></td>
                </tr>
            <% end %>
          <% end %>
        <% else %>
          <tr>
            <td class="text-center text-muted p-4" colspan="100">No imports</td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% end %>
</div>
